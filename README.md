

# Курсовой проект по ООП “Парсер вакансий”

## Описание

Проект представляет собой программу, которая может получать информацию
о вакансиях с разных платформ в России (реализовано взаимодействие с API HeadHunter и SuperJob),
сохранять ее в файлЫ разных типов (реализованы JSON и YAML) и
позволяет потом делать из неё разные выборки (реализована фильтрация по ключевым словам
и сортировка по минимальной/максимальной зарплате).

При сортировке по зарплате учитывается валюта, в которой указана заработная плата, свежие курсы
валют скачиваются из интернета с банковского сайта.

Данные о вакансиях скачиваются с сайтов в различные файлы, в зависимости от сайта.
При скачивании новых данных они добавляются в файл, старые данные сохраняются.

## Интерфейс

В программе реализован интерфейс командной строки. Вид главного меню:
```
C:\CODE\SkyPro\SkyPro_CourseWork04\venv\Scripts\python.exe C:\CODE\SkyPro\SkyPro_CourseWork04\main.py 
Выберите действие (1):
1. Загрузить вакансии с сайта в файл
2. Выбрать вакансии из файла
3. Завершить работу
=> 
```
Пункт `1` служит для загрузки новых данных с сайтов:
```
=> 1
Выберите сайт для поиска (1):
1. HeadHunter
2. SuperJob
=> 
```
Кроме того предоставляется возможность выбора типа файла для сохранения:
```
=> 1
Выберите тип файла (1):
1. JSON
2. YAML
=> 
```
Возможно так же задать ключевые слова:
```
Введите ключевое слово или несколько слов, разделённых пробелом => Flask
Выполняется загрузка вакансий с сайта HeadHunter в файл JSON по ключевому слову "Flask"
Загружено 448 вакансий
```
Пункт `2` главного меню служит для создания выборок из уже скачанных данных по вакансиям.
Сначала предоставляется возможность выбрать тип файла, из которого будут браться данные:
```
=> 2
Выберите тип файла (1):
1. JSON
2. YAML
=>
```
Затем предоставляется возможность модификации запроса, по которому будет делаться выборка:
```
=> 1
Из файла с данными по сайту HeadHunter будут отбираться вакансии с максимальной нижней границей заработной платы
без учёта региона в количестве 10 с использованием ключевого слова "Flask". Изменить запрос (5)?
	1. Изменить сайт
	2. Изменить условие выбора вакансий
	3. Изменить количество вакансий
	4. Изменить ключевое слово
	5. Оставить как есть.
=> 
```
Можно изменить сайт, с которого будет скачана информация, ключевое слово,
тип сортировки и количество вакансий, которые будут выводиться на экран.
В конце модификации запроса нужно выбрать пункт **Оставить как есть**.
Результат запроса выводится в виде таблицы:
```
=> 
Выполняется выборка вакансий из файла hh.json
 Название вакансии         |     Название компании     |  Зарплата   |  Зарплата
                           |                           |     от      |     до
---------------------------|---------------------------|-------------|-------------
 Python Middle Developer ( | Itransition               |  Не указана |  Не указана
 Python Senior Developer ( | Itransition               |  Не указана |  Не указана
 Ментор программист Python | Надлайн                   |  Не указана |   10000 RUR
 Официант                  | FLASK (ФЛАСК)             |  150000 KZT |  250000 KZT
 Python-разработчик (Pre M | ИТС                       |   60000 RUR |  140000 RUR
 Python Flask разработчик  | Бюро Цифровых Технологий  |   80000 RUR |  150000 RUR
 Python-разработчик        | Максимум, Автомобильный х |   80000 RUR |  120000 RUR
 Middle Python Developer ( | DIGITAL FUTURE SYSTEMS    |  110000 RUR |  Не указана
 Python Developer (Middle+ | SARAFAN PLATFORM          |    1500 USD |  Не указана
 Middle Python-разработчик | AERODISK                  |  140000 RUR |  250000 RUR
(Всего выведено 10)
```

## Путеводитель по коду

Кода разбит на модули: **api**, **connector**, **selection**, **vacancy**.  

В модуле **api** находятся классы для работы с API сайтов:
- в файле [api.py](api/api.py) - абстрактный класс **Engine**, объединяющий общие методы всех API-классов.
- в файле [hh.py](api/hh.py) - абстрактный класс **HH**, реализующий работу с API сайта **HeadHunter**.
- в файле [sj.py](api/sj.py) - абстрактный класс **SJ**, реализующий работу с API сайта **SuperJob**.

В модуле **connector** находятся классы для работы с файлами для сохранения загруженных с сайтов вакансий:
- в файле [connector.py](connector/connector.py) - абстрактный класс **Connector**, объединяющий общие методы.
- в файле [jsonconn.py](connector/jsonconn.py) - абстрактный класс **JSONConnector**, реализующий работу с файлами **JSON**.
- в файле [yamlconn.py](connector/yamlconn.py) - абстрактный класс **YAMLConnector**, реализующий работу с файлами **YAML**.

В модуле [selection](selection/selection.py) находится класс **UserSelection** для работы с пользователем,
в экземпляре которого задаётся меню и производится ввод пользовательских запросов.

В модуле **vacancy** находятся классы для работы с загруженнымы в память вакансиями:
- в файле [vacancy.py](vacancy/vacancy.py) - класс **Vacancy**, объединяющий общие методы.
- в файле [hh.py](vacancy/hh.py) - абстрактный класс **HHVacancy**, реализующий работу с васансией **HeadHunter**.
- в файле [sj.py](vacancy/sj.py) - абстрактный класс **SJVacancy**, реализующий работу с вакансией **SuperJob**.

Так же в модуле [vacancy.py](vacancy/vacancy.py) реализован класс **VacancyCollection**, который реализует набор вакансий.

В модуле [utils](utils.py) реализованы вспомогательные функции и класс, в котором происходит загрузка курсов
валют с банковского сайта.

В модуле [main](main.py), помимо функции **main()** реализована функция печати таблицы вакансий на экран.

Во всех классах реализованы методы `__str__`, в классе вакансия так же реализованы методы сравнения
вакансий по заработной плате (`__ge__`, `__gt__`, `__lt__`, `__le__`, `__eq__`, `__ne__`).

В коде применяются декораторы **@staticmethod**, **@property**, **@abstractmethod**.

В коде используется наследование, полиморфизм классов и инкапсуляция данных.

В проекте используется виртуальное окружение на основе **venv**.

## Тесты

Для модуля **vacancy** написаны юнит-тесты, на основе пакета **pytest**.
Тесты реализованы в модуле [tests](tests).
- в файле [test_vacancy.py](tests/test_vacancy.py) тесты для класса **Vacancy**.
- в файле [test_vc.py](tests/test_vc.py) тесты для класса **VacancyCollection**.

Покрытие для кода в этих классах составляет **97%**:
```
Module	statements	missing	excluded	coverage
vacancy\__init__.py	0	0	0	100%
vacancy\hh.py	22	22	0	0%
vacancy\sj.py	4	4	0	0%
vacancy\vacancy.py	122	4	0	97%
Total	148	30	0	80%
coverage.py v7.2.3, created at 2023-04-17 19:24 +0300
```